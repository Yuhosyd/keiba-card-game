# RaceHorseTactics (競馬カードゲーム)

競馬のシミュレーションしたくアルゴリズムを考えていたところ、これを使ってゲームが作れるのではないかと思いました。

### ➤ [ゲームをプレイする](https://Yuhosyd.github.io/keiba-card-game/)
(↑ GitHub Pagesで公開したゲームのURLをここに貼り付けてください)

---

## どんなゲーム？
プレイヤーは馬主となり、手札の競走馬カードの中から1頭を選んでレースに出走させます。レースは全8ターン(暫定)。各レースの賞金を元手に、最終的に最も多くの資産を築いたプレイヤーが勝利となります。単純な運だけでなく、コース条件と馬の能力を読み解く戦略性が勝利の鍵を握ります。

## 遊び方
1.  **ゲーム開始:** 18人のプレイヤー（あなたと17人のCPU）に、それぞれ初期資金と10枚の競走馬カードが配られます。
2.  **出走選択:** 毎ターン、ランダムに決定されるレース条件（競馬場、距離、天候など）が表示されます。あなたは手札（Barn）の中から、その条件に最も適した馬を1頭選び、「この馬で挑戦」ボタンを押します。
3.  **戦術指示:** 出走を決めたら、「逃げ」「先行」「差し」「追込」「捲り」から、その馬に合った戦術を指示します。
4.  **レース観戦:** CPUたちも独自のロジックで出走馬と戦術を決定します。レースは自動で進行し、 প্রথমে隊列が決まり、最終的な着順が決定します。
5.  **賞金獲得:** レースのグレードと着順に応じて賞金が分配されます。
6.  **最終決着:** 全8ターンを終えた時点での所持金ランキングで、最終的な順位が決定します。

## 技術的なポイントと工夫

このゲームは、モダンなJavaScriptの機能（ES Modules）を活用し、関心事を分離した設計になっています。

* **コンポーネントベースのファイル分割:**
    * `game-logic.js`: ゲームの進行、プレイヤーの状態、賞金の計算など、コアなルールを管理。
    * `race-simulation.js`: 本作の心臓部。出走馬の能力とレース条件から、隊列、ペース、最終着順までを決定する複雑なシミュレーションロジックを実装。
    * `ui.js`: DOM操作を完全に分離。ゲームの状態に応じてカードを描画したり、結果を表示したりする責務を担う。
    * `card_data.js`: 200頭以上にも及ぶ競走馬の全パラメータをマスタデータとして外部化。
    * `script.js`: 各モジュールを連携させ、イベントリスナーを登録するエントリーポイント。

* **レースシミュレーション:**
    馬の能力値だけでなく、レースのペース、隊列（集団/縦長/大逃げ）、コースの内外バイアス、天候、ターン経過による馬場状態の変化、さらにはアクシデント（故障）の発生確率までをパラメータ化し、レース結果に反映させています。これにより、二度と同じ展開にはならない奥深いゲーム性を実現しました。

* **動的でUI:**
    プレイヤーの手札表示、選択した馬のconditionや素点のプレビュー、レース展開表示、最終結果のランキング表示など、プレイヤーがゲームの状況を直感的に理解できるようにしています。左右からスライドするドロワーUIも搭載していますが、現状わかりづらいので、直感的操作のためにはこれの自動開閉も実装したく考えています。
