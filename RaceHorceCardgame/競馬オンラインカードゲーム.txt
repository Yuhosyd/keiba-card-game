競馬オンラインカードゲームを作ります．なんとこのカードゲームは6人から18人で対戦できます．コンセプトは戦略と運の絡む頭脳戦です．

〇カードの出し方

ターンごとに参加者はカードを出します．カードは１ターンに１度場に最大４枚出せます．出走させるにはお金がかかります．調子の値はカードを出すと下がります．全部で８ターン(ここは任意設定かも)です．



〇手札のしくみ　実装
もともとカード候補が存在しており，それを参加者にランダムに10枚ずつ配ります



〇プレイヤーの動きとターン処理

ターンが始まると，そのターンの開催場，芝/ダート,距離,天気がランダム(確率に重みづけあり)で決まります(条件アルゴリズム)．この情報を見て各プレイヤーはカードを4枚まで場に出します．全員のカードが出そろったら，まずは出走アルゴリズムによりカードが18枚までに絞られ，出走しなかったカードは手札に戻されます．出走カードたちの平均先行値に応じてペース予測が決定，全プレイヤーに表示します．また，カード全ての枠順をランダムで決定し，全プレイヤーに表示します．ペース予測と枠順を見てプレイヤーは自分が出したカードを何番手追走にするか希望を出します．追走アルゴリズムに従い全員の隊列が決定します．カード個性値の一部(開催場補正，先行値など)，隊列を加味したペースアルゴリズムに従い，全出走カードのレース補正(0.9~1.1)が決定します．これらとカード個性値(能力系)を踏まえ決まったスコアアルゴリズムにより最終カードスコアを決定，スコアが高い順に着順が確定し賞金が分配されます．持ち金が高い方が勝ちです．そのターンで得られる収得賞金は毎ターン自動で設定されます．







〇カードの個性値　実装

馬カード１つ１つの性能には次のようなパラメータがあります：

・開催場適正値(東京，中山，阪神，京都，中京，札幌，函館，小倉，新潟，福島にそれぞれ0.8~1.2を規定)

・芝/ダート適正値(0.5,1,1.2の３択，不得意，普通，得意)

・距離適正値(1200未満,1400,1600,1800,2000,2200,2400,3000以上にそれぞれ補正値0.5~1.3が決められている)

・調子値(1~10整数)

・初期調子値(ゲーム開始時の調子，1~10)

・調子回復スパン(調子値が毎ターンいくら回復するか．1~5)


・天気補正(0.5~1)


・パワー値(1~10，整数)

・スピード値(1~10，整数)

・スタミナ値(1~10，整数)

・賢さ値(1~10，整数)

・やるき値(1~10整数)


・先行値(1~5整数)

・追込値(1~5整数)

・アクシデント率(0~10%)



〇レースパラメータ

・枠順

・ペース予測値

・希望追走順番値

・レース補正

・最終スコア


〇アルゴリズム一覧

・条件アルゴリズム　完成
レース条件，馬場状況を確率的に決定

・出走アルゴリズム
馬主の賞金状況と馬のやる気，調子を加味して場に出されたカードの中から出走馬を確定する．勝ち経験，上位経験のある馬は出走補正がかかり出やすくなる

・追走アルゴリズム　完成
先行値，賢さ，調子，やる気，枠順，希望追走順番を加味して縦の配列と逃げ馬を決定する．

・ペースアルゴリズム
先行勢の先行値，賢さ，調子，やる気，枠順、縦の配列、また開催場補正値を加味して補正値を各馬に決定．ハイペースなら後ろの馬が，スローペースなら前の馬が有利．開催場が外有利なら隊列外，内有利なら隊列内が有利．

・スキルスコアアルゴリズム　完成
馬の個性値を計算に盛り込み着順としてスコアを出す

・最終スコア
ペース補正値、スキルスコアを加味して決着スコアとする。．

・アクシデントアルゴリズム
落鉄，落馬，怪我，熱発によるレースへの影響